# 기능 구현 작업 순서 계획

## 0. 공통 준비 단계

- **상태 관리 전략 정의**
  - 전역 상태 컨테이너(`store`) 초안 설계: 상품 목록, 필터, 페이지네이션, 장바구니, 토스트 상태 분리.
  - 옵저버 패턴 기반 렌더러 또는 간단한 이벤트 버스 도입 여부 결정.
- **API 및 데이터 유틸 재정비**
  - `productApi.js`에 목록/상세/검색/카테고리 API 래핑 함수 정의.
  - 에러 케이스 대비하여 응답 검증 유틸 추가.
- **라우팅 유틸리티 구성**
  - pushState/popstate 관리 헬퍼 작성.
  - URL 쿼리 파서/시리얼라이저 작성.
- **공통 UI 컴포넌트 확장**
  - 로딩 인디케이터, 스켈레톤, 토스트, 모달, 버튼 컴포넌트 초안 작성.
  - 재사용 가능한 드롭다운, 체크박스 그룹 컴포넌트 설계.

## 1. 상품 목록 페이지 기반 구조 강화

- **홈 페이지 레이아웃 정비**
  - `PageLayout` 확장: 헤더, 메인 컨텐트, 푸터 영역 분리.
  - 공통 헤더에 장바구니 아이콘, 브레드크럼 영역 연결.
- **렌더 파이프라인 구축**
  - 최초 진입 시 로딩 상태 → 데이터 페칭 → 최종 렌더 순서 확립.
  - 렌더 함수와 상태 변경 함수 간 결합 최소화를 위한 어댑터 작성.

## 2. 상품 목록 로딩/에러 시나리오 구현

- **로딩 상태**
  - `ProductList` 내에 로딩 플래그 기반 스켈레톤 UI 표시.
  - 무한 스크롤 추가 로드 시에도 동일한 스켈레톤 재사용.
- **에러 처리**
  - API 실패 시 상태 트리거 → 에러 블록 렌더.
  - 재시도 버튼 클릭 시 재요청 및 이전 조건 유지.

## 3. 상품 목록 조회 UI/UX 구현

- **상품 카드**
  - 이미지, 제목, 가격, 장바구니 버튼 포함 템플릿 정리.
  - 접근성(alt, aria) 태그 확인.
- **클릭 이벤트**
  - 카드 클릭 시 상세 페이지로 라우팅.
  - 이벤트 위임 + debounce 고려.

## 4. 페이지당 상품 수 선택 기능

- **상태 연결**
  - `limit-select`와 전역 필터 상태 연결.
  - 변경 시 목록 재요청 및 첫 페이지로 리셋.
- **URL 동기화**
  - 선택 변경 시 쿼리 파라미터 `limit` 업데이트.

## 5. 상품 정렬 기능

- **정렬 옵션 정의**
  - 가격, 이름 오름/내림 사전 정의.
- **정렬 적용**
  - 전역 상태 또는 API 요청 시 정렬 조건 전달.
  - 클라이언트 정렬 대비 서버 정렬 스펙 확인 후 결정.
- **UI 상호작용**
  - 드롭다운 변경 이벤트 → 상태 업데이트 → 재렌더.

## 6. 무한 스크롤 페이지네이션

- **스크롤 감지**
  - `IntersectionObserver` 기반 감시 영역 배치.
  - 로딩 중 중복 요청 방지 플래그 적용.
- **데이터 병합**
  - 기존 목록과 신 데이터 병합 로직 구현.
  - 마지막 페이지 판단 후 옵저버 해제.

## 7. 장바구니 담기 플로우 (목록 페이지)

- **전역 장바구니 상태**
  - 아이템 구조: `id`, `title`, `price`, `quantity`, `selected`.
  - 수량 증가 시 누적, 최초 추가 시 토스트 표시.
- **장바구니 아이콘 배지**
  - 총 수량 또는 SKU 개수 기준 표시.
- **토스트 알림**
  - 성공/실패 타입에 따른 스타일, 자동 닫힘 3초 타이머.

## 8. 상품 검색 기능

- **검색 입력 처리**
  - 입력 필드와 버튼 이벤트 핸들러 구성.
  - Enter 키 이벤트 처리.
- **검색 요청**
  - URL 쿼리 `query` 동기화.
  - 디바운스와 즉시 실행 전략 검토.

## 9. 카테고리 선택 및 브레드크럼

- **카테고리 데이터 준비**
  - `items.json` 기반 1depth/2depth 리스트 사전 추출 유틸 작성.
- **UI 구성**
  - 1depth 버튼 그룹, 선택 시 2depth 렌더.
  - 전체 보기 버튼으로 필터 초기화.
- **브레드크럼**
  - 선택 경로를 상단에 렌더, 각 단계 클릭 시 상위 카테고리로 이동.
- **URL 반영**
  - `category1`, `category2` 파라미터 관리.

## 10. 현재 상품 수 표시

- **상태 기반 표시**
  - 필터 적용 결과 수, 전체 수 분리.
- **UI 업데이트**
  - 검색/필터 변경 시 즉시 다시 렌더.

## 11. 장바구니 모달 구현

- **모달 컴포넌트**
  - 오버레이, 닫기 버튼, ESC 이벤트 처리.
- **장바구니 내용 렌더**
  - 상태 변화 시 모달 내부 리스트 업데이트.
- **모달 내 상호작용**
  - 배경 클릭, X 버튼으로 닫기.

## 12. 장바구니 수량/삭제 기능

- **수량 조절 버튼**
  - 증가/감소 버튼, 최소 1, 재고 상한 적용.
  - 입력 직접 수정 가능 시 유효성 검증 추가.
- **합계 금액 업데이트**
  - 수량 변경 즉시 합계 재계산.
- **삭제 기능**
  - 개별 삭제 버튼 → 해당 아이템 제거.

## 13. 장바구니 선택/전체 선택/비우기

- **체크박스 상태 관리**
  - 각 상품별 `selected` 상태 유지.
  - 마스터 체크박스 ↔ 개별 체크 연동.
- **선택 삭제**
- **전체 비우기**
  - 선택된 항목 삭제 후 토스트 표시.

## 14. 상품 상세 페이지 네비게이션

- **상세 라우팅**
  - `/products/:id` 패턴 인식, 직접 접근 시 데이터 로드.
- **상세 데이터 로딩**
  - 로딩 인디케이터 + 에러 처리.
- **브레드크럼/목록 복귀**
  - 브레드크럼 클릭 → 카테고리 필터 적용된 목록 페이지로 이동.
  - 목록 돌아가기 버튼으로 `/` 이동 및 직전 조건 복원.

## 15. 상세 페이지 기능 심화

- **상세 정보 렌더**
  - 이미지, 설명, 가격, 재고 등 정적/동적 데이터 연결.
- **수량 선택**
  - +/- 버튼, 직접 입력, 유효성 처리.
- **장바구니 담기**
  - 상세 수량 기반으로 장바구니 추가.
- **관련 상품**
  - `category2` 기반 필터링, 현재 상품 제외.
  - 카드 클릭 시 해당 상세 페이지 이동.

## 16. 사용자 피드백 시스템 (토스트)

- **토스트 매니저**
  - 전역 큐 관리, 타입별 스타일 정의.
- **자동 닫힘**
  - 3초 타이머, 마우스 호버 시 일시정지 고려.
- **수동 닫기 버튼**
  - 클릭 시 해당 토스트 제거.

## 17. SPA 네비게이션 및 URL 관리 (심화 전 단계)

- **히스토리 스택 관리**
  - `history.pushState`, `replaceState` 래퍼 함수 작성.
  - 브라우저 내비게이션(popstate) 시 상태 복원.
- **URL 동기화**
  - 검색, 카테고리, 정렬, 옵션 변경 시 URL 즉시 업데이트.
- **초기 진입 처리**
  - URL 파싱하여 초기 상태 셋업.

## 18. 상태 복원 시나리오

- **상품 목록**
  - 새로고침 시 URL 쿼리 기반 조건 복원 → 데이터 재로드.
- **장바구니**
  - LocalStorage 또는 IndexedDB 사용.
  - 선택 상태 포함 저장/복원 로직 구현.
- **상세 페이지**
  - 새로고침 시 URL ID 사용하여 API 재호출.

## 19. 404 페이지

- **라우팅 가드**
  - 정의되지 않은 경로 접근 시 404 템플릿 렌더.
- **UI 요소**
  - 안내 메시지, 홈으로 돌아가기 버튼.

## 20. 테스트 & 검증

- **단위 테스트**
  - 유틸/상태 관리 함수별 Vitest 스펙 작성.
- **E2E 리그레이션**
  - Playwright 스위트 업데이트, 시나리오별 데이터 준비.
- **접근성/성능 점검**
  - 필수 컴포넌트 aria 속성, Lighthouse 스모크 체크.

## 21. 문서화 및 마무리

- **기능별 README 섹션 정리**
  - 사용법, 제약, 후속 과제 기록.
- **PR 템플릿 체크리스트 대응**
  - 각 항목별 수행 결과 캡처/증빙 정리.
- **배포 점검**
  - Vite 빌드 → GitHub Pages(`https://<username>.github.io/front-7th-chapter2-1/`) 배포 검증.
  - 필요 시 GitHub Actions 워크플로우로 자동 배포 파이프라인 구성.
